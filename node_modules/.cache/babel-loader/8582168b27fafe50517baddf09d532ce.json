{"ast":null,"code":"import { extend, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { closest as closestElement, removeClass, classList, remove } from '@syncfusion/ej2-base';\nimport { getElementIndex, inArray, parentsUntil, getPosition, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * The `Reorder` module is used for reordering columns.\n */\n\nvar Reorder =\n/** @class */\nfunction () {\n  /**\n   * Constructor for the Grid reorder module\n   * @hidden\n   */\n  function Reorder(parent) {\n    this.parent = parent;\n\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.headerDrop, this.headerDrop, this);\n    this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    this.parent.on(events.reorderComplete, this.onActionComplete, this);\n    this.parent.on(events.columnDrag, this.drag, this);\n    this.parent.on(events.columnDragStart, this.dragStart, this);\n    this.parent.on(events.columnDragStop, this.dragStop, this);\n    this.parent.on(events.headerDrop, this.headerDrop, this);\n    this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n    this.parent.on(events.keyPressed, this.keyPressHandler, this);\n  }\n\n  Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n    var col = this.parent.getColumnByUid(destElem.firstElementChild.getAttribute('e-mappinguid'));\n    var bool = col ? !col.lockColumn : true;\n    return (srcElem.parentElement.isEqualNode(destElem.parentElement) || this.parent.enableColumnVirtualization || this.parent.getFrozenColumns() && Array.prototype.indexOf.call(closestElement(srcElem, 'thead').children, srcElem.parentElement) === Array.prototype.indexOf.call(closestElement(destElem, 'thead').children, destElem.parentElement)) && this.targetParentContainerIndex(srcElem, destElem) > -1 && bool;\n  };\n\n  Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n    var isFound;\n    var headers = this.getHeaderCells();\n    var header;\n\n    while (!isFound && headers.length > 0) {\n      header = headers.pop();\n      isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n    }\n\n    return isFound;\n  };\n\n  Reorder.prototype.findColParent = function (col, cols, parent) {\n    parent = parent;\n\n    for (var i = 0, len = cols.length; i < len; i++) {\n      if (col === cols[i]) {\n        return true;\n      } else if (cols[i].columns) {\n        var cnt = parent.length;\n        parent.push(cols[i]);\n\n        if (!this.findColParent(col, cols[i].columns, parent)) {\n          parent.splice(cnt, parent.length - cnt);\n        } else {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  Reorder.prototype.getColumnsModel = function (cols) {\n    var columnModel = [];\n    var subCols = [];\n\n    for (var i = 0, len = cols.length; i < len; i++) {\n      columnModel.push(cols[i]);\n\n      if (cols[i].columns) {\n        subCols = subCols.concat(cols[i].columns);\n      }\n    }\n\n    if (subCols.length) {\n      columnModel = columnModel.concat(this.getColumnsModel(subCols));\n    }\n\n    return columnModel;\n  };\n\n  Reorder.prototype.headerDrop = function (e) {\n    var gObj = this.parent;\n    var dropElement = this.element.querySelector('.e-headercelldiv') || this.element.querySelector('.e-stackedheadercelldiv');\n    var uId = dropElement.getAttribute('e-mappinguid');\n    var column = gObj.getColumnByUid(uId);\n\n    if (!closestElement(e.target, 'th') || !isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn)) {\n      this.parent.log('action_disabled_column', {\n        moduleName: this.getModuleName(),\n        column: column\n      });\n      return;\n    }\n\n    var destElem = closestElement(e.target, '.e-headercell');\n    var destElemDiv = destElem.querySelector('.e-headercelldiv') || destElem.querySelector('.e-stackedheadercelldiv');\n    var destElemUid = destElemDiv.getAttribute('e-mappinguid');\n\n    if (!isNullOrUndefined(destElemUid)) {\n      var destColumn = gObj.getColumnByUid(destElemUid);\n\n      if (isNullOrUndefined(destColumn) || !destColumn.allowReordering || destColumn.lockColumn) {\n        this.parent.log('action_disabled_column', {\n          moduleName: this.getModuleName(),\n          column: column,\n          destColumn: destColumn\n        });\n        return;\n      }\n    }\n\n    if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n      if (this.parent.enableColumnVirtualization) {\n        var columns = this.parent.columns;\n        var sourceUid_1 = this.element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n        var col = this.parent.columns.filter(function (col) {\n          return col.uid === sourceUid_1;\n        });\n        var colMatchIndex_1 = null;\n        var column_1 = col[0];\n        var destUid_1 = destElem.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n        var bool = columns.some(function (col, index) {\n          if (col.uid === destUid_1) {\n            colMatchIndex_1 = index;\n            return col.uid === destUid_1;\n          }\n\n          return false;\n        });\n\n        if (!isNullOrUndefined(colMatchIndex_1)) {\n          this.moveColumns(colMatchIndex_1, column_1);\n        }\n      } else {\n        var newIndex = this.targetParentContainerIndex(this.element, destElem);\n        var uid = this.element.firstElementChild.getAttribute('e-mappinguid');\n        this.destElement = destElem;\n\n        if (uid) {\n          this.moveColumns(newIndex, this.parent.getColumnByUid(uid));\n        } else {\n          var headers = this.getHeaderCells();\n          var oldIdx = getElementIndex(this.element, headers);\n          var columns = this.getColumnsModel(this.parent.columns);\n          var column_2 = columns[oldIdx];\n          this.moveColumns(newIndex, column_2);\n        }\n      }\n    }\n  };\n\n  Reorder.prototype.isActionPrevent = function (gObj) {\n    return isActionPrevent(gObj);\n  };\n\n  Reorder.prototype.moveColumns = function (destIndex, column, reorderByColumn, preventRefresh) {\n    var gObj = this.parent;\n\n    if (this.isActionPrevent(gObj)) {\n      gObj.notify(events.preventBatch, {\n        instance: this,\n        handler: this.moveColumns,\n        arg1: destIndex,\n        arg2: column\n      });\n      return;\n    }\n\n    var parent = this.getColParent(column, this.parent.columns);\n    var cols = parent ? parent.columns : this.parent.columns;\n    var srcIdx = inArray(column, cols);\n\n    if ((this.parent.getFrozenColumns() && parent || this.parent.lockcolPositionCount) && !reorderByColumn) {\n      for (var i = 0; i < cols.length; i++) {\n        if (cols[i].field === column.field) {\n          srcIdx = i;\n          break;\n        }\n      }\n\n      var col = this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute('e-mappinguid'));\n\n      if (col) {\n        for (var i = 0; i < cols.length; i++) {\n          if (cols[i].field === col.field) {\n            destIndex = i;\n            break;\n          }\n        }\n      } else {\n        for (var i = 0; i < cols.length; i++) {\n          if (cols[i].headerText === this.destElement.innerText.trim()) {\n            destIndex = i;\n          }\n        }\n      }\n    }\n\n    if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n      return;\n    }\n\n    cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n    gObj.getColumns(true);\n    gObj.notify(events.columnPositionChanged, {\n      fromIndex: destIndex,\n      toIndex: srcIdx\n    });\n\n    if (preventRefresh !== false) {\n      gObj.notify(events.modelChanged, {\n        type: events.actionBegin,\n        requestType: 'reorder',\n        fromIndex: destIndex,\n        toIndex: srcIdx,\n        toColumnUid: column.uid\n      });\n    }\n  };\n\n  Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n    var headers = this.getHeaderCells();\n    var cols = this.parent.columns;\n    var flatColumns = this.getColumnsModel(cols);\n    var parent = this.getColParent(flatColumns[getElementIndex(srcElem, headers)], cols);\n    cols = parent ? parent.columns : cols;\n    return inArray(flatColumns[getElementIndex(destElem, headers)], cols);\n  };\n\n  Reorder.prototype.getHeaderCells = function () {\n    var frozenColumns = this.parent.getFrozenColumns();\n\n    if (frozenColumns || this.parent.lockcolPositionCount) {\n      var fTh = void 0;\n      var mTh = void 0;\n      var fHeaders = [];\n      var fRows = [].slice.call(this.parent.getHeaderTable().querySelectorAll('.e-columnheader'));\n\n      if (frozenColumns) {\n        var mRows = [].slice.call(this.parent.getHeaderContent().querySelector('.e-movableheader').querySelectorAll('.e-columnheader'));\n\n        for (var i = 0; i < fRows.length; i++) {\n          fTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n          mTh = [].slice.call(mRows[i].getElementsByClassName('e-headercell'));\n          var isAvail = void 0;\n\n          for (var k = 0; k < fTh.length; k++) {\n            for (var j = 0; j < mTh.length; j++) {\n              if (mTh[j].innerText === fTh[k].innerText) {\n                isAvail = true;\n                break;\n              }\n            }\n\n            if (!isAvail) {\n              fHeaders = fHeaders.concat([fTh[k]]);\n            }\n          }\n\n          for (var j = 0; j < mTh.length; j++) {\n            fHeaders.push(mTh[j]);\n          }\n        }\n      } else {\n        for (var i = 0; i < fRows.length; i++) {\n          mTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n\n          for (var k = 0; k < mTh.length; k++) {\n            var isAvail = void 0;\n\n            for (var j = k + 1; j < mTh.length; j++) {\n              if (mTh[j].innerText === mTh[k].innerText) {\n                isAvail = true;\n                break;\n              }\n            }\n\n            if (!isAvail) {\n              fHeaders = fHeaders.concat([mTh[k]]);\n            }\n          }\n        }\n      }\n\n      return fHeaders;\n    } else {\n      return [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n    }\n  };\n\n  Reorder.prototype.getColParent = function (column, columns) {\n    var parents = [];\n    this.findColParent(column, columns, parents);\n    return parents[parents.length - 1];\n  };\n\n  Reorder.prototype.reorderSingleColumn = function (fromFName, toFName) {\n    var fColumn = this.parent.enableColumnVirtualization ? this.parent.columns.filter(function (col) {\n      return col.field === fromFName;\n    })[0] : this.parent.getColumnByField(fromFName);\n    var toColumn = this.parent.enableColumnVirtualization ? this.parent.columns.filter(function (col) {\n      return col.field === toFName;\n    })[0] : this.parent.getColumnByField(toFName);\n\n    if (!isNullOrUndefined(fColumn) && (!fColumn.allowReordering || fColumn.lockColumn) || !isNullOrUndefined(toColumn) && (!toColumn.allowReordering || fColumn.lockColumn)) {\n      this.parent.log('action_disabled_column', {\n        moduleName: this.getModuleName(),\n        column: fColumn,\n        destColumn: toColumn\n      });\n      return;\n    }\n\n    var column = toColumn;\n    var parent = this.getColParent(column, this.parent.columns);\n    var columns = parent ? parent.columns : this.parent.columns;\n    var destIndex = inArray(column, columns);\n\n    if (destIndex > -1) {\n      this.moveColumns(destIndex, fColumn, true);\n    }\n  };\n\n  Reorder.prototype.reorderMultipleColumns = function (fromFNames, toFName) {\n    var toIndex = this.parent.getColumnIndexByField(toFName);\n    var toColumn = this.parent.getColumnByField(toFName);\n\n    if (toIndex < 0 || !isNullOrUndefined(toColumn) && (!toColumn.allowReordering || toColumn.lockColumn)) {\n      return;\n    }\n\n    for (var i = 0; i < fromFNames.length; i++) {\n      var column = this.parent.getColumnByField(fromFNames[i]);\n\n      if (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn)) {\n        return;\n      }\n    }\n\n    for (var i = 0; i < fromFNames.length; i++) {\n      var column = this.parent.getColumnByIndex(toIndex);\n      var parent_1 = this.getColParent(column, this.parent.columns);\n      var columns = parent_1 ? parent_1.columns : this.parent.columns;\n      var destIndex = inArray(column, columns);\n\n      if (destIndex > -1) {\n        this.moveColumns(destIndex, this.parent.getColumnByField(fromFNames[i]), true, !(isBlazor() && !this.parent.isJsComponent));\n      }\n\n      if (this.parent.getColumnIndexByField(fromFNames[i + 1]) >= destIndex) {\n        toIndex++; //R to L\n      }\n    }\n\n    if (isBlazor() && !this.parent.isJsComponent) {\n      var cols_1 = this.parent.getColumns();\n      this.parent.notify(events.modelChanged, {\n        fromColumnUid: fromFNames.map(function (name) {\n          return cols_1.filter(function (col) {\n            return col.field === name;\n          })[0].uid;\n        }),\n        toColumnUid: toColumn.uid,\n        isMultipleReorder: true,\n        requestType: 'reorder',\n        type: 'actionBegin'\n      });\n    }\n  };\n\n  Reorder.prototype.moveTargetColumn = function (column, toIndex) {\n    if (toIndex > -1) {\n      this.moveColumns(toIndex, column, true);\n    }\n  };\n\n  Reorder.prototype.reorderSingleColumnByTarget = function (fieldName, toIndex) {\n    var column = this.parent.getColumnByField(fieldName);\n    this.moveTargetColumn(column, toIndex);\n  };\n\n  Reorder.prototype.reorderMultipleColumnByTarget = function (fieldName, toIndex) {\n    for (var i = 0; i < fieldName.length; i++) {\n      this.reorderSingleColumnByTarget(fieldName[i], toIndex);\n    }\n  };\n  /**\n   * Changes the position of the Grid columns by field names.\n   * @param  {string | string[]} fromFName - Defines the origin field names.\n   * @param  {string} toFName - Defines the destination field name.\n   * @return {void}\n   */\n\n\n  Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n    if (typeof fromFName === 'string') {\n      this.reorderSingleColumn(fromFName, toFName);\n      this.fromCol = fromFName;\n    } else {\n      this.reorderMultipleColumns(fromFName, toFName);\n      this.fromCol = fromFName[0];\n    }\n  };\n  /**\n   * Changes the position of the Grid columns by field index.\n   * @param  {number} fromIndex - Defines the origin field index.\n   * @param  {number} toIndex - Defines the destination field index.\n   * @return {void}\n   */\n\n\n  Reorder.prototype.reorderColumnByIndex = function (fromIndex, toIndex) {\n    var column = this.parent.getColumnByIndex(fromIndex);\n    this.moveTargetColumn(column, toIndex);\n  };\n  /**\n   * Changes the position of the Grid columns by field index.\n   * @param  {string | string[]} fieldName - Defines the field name.\n   * @param  {number} toIndex - Defines the destination field index.\n   * @return {void}\n   */\n\n\n  Reorder.prototype.reorderColumnByTargetIndex = function (fieldName, toIndex) {\n    typeof fieldName === 'string' ? this.reorderSingleColumnByTarget(fieldName, toIndex) : this.reorderMultipleColumnByTarget(fieldName, toIndex);\n  };\n\n  Reorder.prototype.enableAfterRender = function (e) {\n    if (e.module === this.getModuleName() && e.enable) {\n      this.createReorderElement();\n    }\n  };\n\n  Reorder.prototype.createReorderElement = function (e) {\n    if (e && e.args.isXaxis) {\n      this.setDisplay('none');\n    }\n\n    var header = this.parent.element.querySelector('.e-headercontent');\n    this.upArrow = header.appendChild(this.parent.createElement('div', {\n      className: 'e-icons e-icon-reorderuparrow e-reorderuparrow',\n      attrs: {\n        style: 'display:none'\n      }\n    }));\n    this.downArrow = header.appendChild(this.parent.createElement('div', {\n      className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow',\n      attrs: {\n        style: 'display:none'\n      }\n    }));\n  };\n  /**\n   * The function used to trigger onActionComplete\n   * @return {void}\n   * @hidden\n   */\n\n\n  Reorder.prototype.onActionComplete = function (e) {\n    if (isBlazor() && !this.parent.isJsComponent) {\n      e.rows = null;\n    }\n\n    this.parent.trigger(events.actionComplete, extend(e, {\n      type: events.actionComplete\n    }));\n    var target = this.fromCol && this.parent.getColumnHeaderByField(this.fromCol);\n\n    if (target) {\n      this.parent.focusModule.onClick({\n        target: target\n      }, true);\n    }\n  };\n  /**\n   * To destroy the reorder\n   * @return {void}\n   * @hidden\n   */\n\n\n  Reorder.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n\n    if (this.parent.isDestroyed || !gridElement || !gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent')) {\n      return;\n    }\n\n    remove(this.upArrow);\n    remove(this.downArrow);\n    this.parent.off(events.headerDrop, this.headerDrop);\n    this.parent.off(events.uiUpdate, this.enableAfterRender);\n    this.parent.off(events.reorderComplete, this.onActionComplete);\n    this.parent.off(events.columnDrag, this.drag);\n    this.parent.off(events.columnDragStart, this.dragStart);\n    this.parent.off(events.columnDragStop, this.dragStop);\n    this.parent.off(events.headerRefreshed, this.createReorderElement);\n    this.parent.off(events.keyPressed, this.keyPressHandler); //call ejdrag and drop destroy\n  };\n\n  Reorder.prototype.keyPressHandler = function (e) {\n    var gObj = this.parent;\n\n    switch (e.action) {\n      case 'ctrlLeftArrow':\n      case 'ctrlRightArrow':\n        var element = gObj.focusModule.currentInfo.element;\n\n        if (element && element.classList.contains('e-headercell')) {\n          var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n          var visibleCols = gObj.getVisibleColumns();\n          var index = visibleCols.indexOf(column);\n          var toCol = e.action === 'ctrlLeftArrow' ? visibleCols[index - 1] : visibleCols[index + 1];\n\n          if (toCol && toCol.field && column.field) {\n            this.reorderColumns(column.field, toCol.field);\n          }\n        }\n\n        break;\n    }\n  };\n\n  Reorder.prototype.drag = function (e) {\n    var gObj = this.parent;\n    var target = e.target;\n\n    if (!e.column.allowReordering || e.column.lockColumn) {\n      return;\n    }\n\n    var closest = closestElement(target, '.e-headercell:not(.e-stackedHeaderCell)');\n    var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n    var content = gObj.getFrozenColumns() ? gObj.getMovableVirtualContent() : gObj.getContent().firstElementChild;\n    var isLeft = this.x > getPosition(e.event).x + content.scrollLeft;\n    removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n    this.setDisplay('none');\n    this.stopTimer();\n    classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n    this.updateScrollPostion(e.event);\n\n    if (closest && !closest.isEqualNode(this.element)) {\n      target = closest; //consider stacked, detail header cell \n\n      if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n        this.updateArrowPosition(target, isLeft);\n        classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n      } else if (!(gObj.allowGrouping && parentsUntil(e.target, 'e-groupdroparea'))) {\n        classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n      }\n    }\n\n    gObj.trigger(events.columnDrag, {\n      target: target,\n      draggableType: 'headercell',\n      column: e.column\n    });\n  };\n\n  Reorder.prototype.updateScrollPostion = function (e) {\n    var _this = this;\n\n    var frzCols = this.parent.getFrozenColumns();\n    var x = getPosition(e).x;\n    var cliRect = this.parent.element.getBoundingClientRect();\n    var cliRectBaseLeft = frzCols ? this.parent.element.querySelector('.e-movableheader').getBoundingClientRect().left : cliRect.left;\n    var cliRectBaseRight = cliRect.right;\n    var scrollElem = frzCols ? this.parent.getContent().querySelector('.e-movablecontent') : this.parent.getContent().firstElementChild;\n\n    if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n      this.timer = window.setInterval(function () {\n        _this.setScrollLeft(scrollElem, true);\n      }, 50);\n    } else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n      this.timer = window.setInterval(function () {\n        _this.setScrollLeft(scrollElem, false);\n      }, 50);\n    }\n  };\n\n  Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n    var scrollLeft = scrollElem.scrollLeft;\n    scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n\n    if (scrollLeft !== scrollElem.scrollLeft) {\n      this.setDisplay('none');\n    }\n  };\n\n  Reorder.prototype.stopTimer = function () {\n    window.clearInterval(this.timer);\n  };\n\n  Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n    var cliRect = target.getBoundingClientRect();\n    var cliRectBase = this.parent.element.getBoundingClientRect();\n\n    if (isLeft && cliRect.left < cliRectBase.left || !isLeft && cliRect.right > cliRectBase.right) {\n      return;\n    }\n\n    if (this.parent.getFrozenColumns() && target.classList.contains('e-headercell')) {\n      var col = this.parent.getColumnByUid(target.firstElementChild.getAttribute('e-mappinguid'));\n      var fhdrWidth = Math.round(this.parent.getFrozenVirtualHeader().getBoundingClientRect().right);\n      var mhdrRight = Math.round(this.parent.getMovableVirtualHeader().getBoundingClientRect().right);\n\n      if (col && this.parent.getNormalizedColumnIndex(col.uid) >= this.parent.getFrozenColumns() && (isLeft && Math.round(cliRect.left) < fhdrWidth || !isLeft && mhdrRight < cliRect.right)) {\n        return;\n      }\n    }\n\n    this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n    this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n    this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n    this.setDisplay('');\n  };\n\n  Reorder.prototype.dragStart = function (e) {\n    var gObj = this.parent;\n    var target = e.target;\n    this.element = target.classList.contains('e-headercell') ? target : parentsUntil(target, 'e-headercell');\n\n    if (!e.column.allowReordering || e.column.lockColumn) {\n      return;\n    }\n\n    var content = gObj.getFrozenColumns() ? gObj.getMovableVirtualContent() : gObj.getContent().firstElementChild;\n    this.x = getPosition(e.event).x + content.scrollLeft;\n    gObj.trigger(events.columnDragStart, {\n      target: target,\n      draggableType: 'headercell',\n      column: e.column\n    });\n  };\n\n  Reorder.prototype.dragStop = function (e) {\n    var gObj = this.parent;\n    this.setDisplay('none');\n    this.stopTimer();\n\n    if (!e.cancel) {\n      gObj.trigger(events.columnDrop, {\n        target: e.target,\n        draggableType: 'headercell',\n        column: e.column\n      });\n    }\n\n    removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n  };\n\n  Reorder.prototype.setDisplay = function (display) {\n    this.upArrow.style.display = display;\n    this.downArrow.style.display = display;\n  };\n  /**\n   * For internal use only - Get the module name.\n   * @private\n   */\n\n\n  Reorder.prototype.getModuleName = function () {\n    return 'reorder';\n  };\n\n  return Reorder;\n}();\n\nexport { Reorder };","map":{"version":3,"sources":["/home/nikhil/Desktop/data_grid_editor-master/node_modules/@syncfusion/ej2-grids/src/grid/actions/reorder.js"],"names":["extend","isNullOrUndefined","isBlazor","closest","closestElement","removeClass","classList","remove","getElementIndex","inArray","parentsUntil","getPosition","isActionPrevent","events","Reorder","parent","isDestroyed","on","headerDrop","uiUpdate","enableAfterRender","reorderComplete","onActionComplete","columnDrag","drag","columnDragStart","dragStart","columnDragStop","dragStop","headerRefreshed","createReorderElement","keyPressed","keyPressHandler","prototype","chkDropPosition","srcElem","destElem","col","getColumnByUid","firstElementChild","getAttribute","bool","lockColumn","parentElement","isEqualNode","enableColumnVirtualization","getFrozenColumns","Array","indexOf","call","children","targetParentContainerIndex","chkDropAllCols","isFound","headers","getHeaderCells","header","length","pop","findColParent","cols","i","len","columns","cnt","push","splice","getColumnsModel","columnModel","subCols","concat","e","gObj","dropElement","element","querySelector","uId","column","target","allowReordering","log","moduleName","getModuleName","destElemDiv","destElemUid","destColumn","sourceUid_1","filter","uid","colMatchIndex_1","column_1","destUid_1","some","index","moveColumns","newIndex","destElement","oldIdx","column_2","destIndex","reorderByColumn","preventRefresh","notify","preventBatch","instance","handler","arg1","arg2","getColParent","srcIdx","lockcolPositionCount","field","headerText","innerText","trim","getColumns","columnPositionChanged","fromIndex","toIndex","modelChanged","type","actionBegin","requestType","toColumnUid","flatColumns","frozenColumns","fTh","mTh","fHeaders","fRows","slice","getHeaderTable","querySelectorAll","mRows","getHeaderContent","getElementsByClassName","isAvail","k","j","parents","reorderSingleColumn","fromFName","toFName","fColumn","getColumnByField","toColumn","reorderMultipleColumns","fromFNames","getColumnIndexByField","getColumnByIndex","parent_1","isJsComponent","cols_1","fromColumnUid","map","name","isMultipleReorder","moveTargetColumn","reorderSingleColumnByTarget","fieldName","reorderMultipleColumnByTarget","reorderColumns","fromCol","reorderColumnByIndex","reorderColumnByTargetIndex","module","enable","args","isXaxis","setDisplay","upArrow","appendChild","createElement","className","attrs","style","downArrow","rows","trigger","actionComplete","getColumnHeaderByField","focusModule","onClick","destroy","gridElement","off","action","currentInfo","contains","visibleCols","getVisibleColumns","toCol","cloneElement","content","getMovableVirtualContent","getContent","isLeft","x","event","scrollLeft","stopTimer","updateScrollPostion","updateArrowPosition","allowGrouping","draggableType","_this","frzCols","cliRect","getBoundingClientRect","cliRectBaseLeft","left","cliRectBaseRight","right","scrollElem","timer","window","setInterval","setScrollLeft","clearInterval","cliRectBase","fhdrWidth","Math","round","getFrozenVirtualHeader","mhdrRight","getMovableVirtualHeader","getNormalizedColumnIndex","top","height","cancel","columnDrop","display"],"mappings":"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","sourcesContent":["import { extend, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { closest as closestElement, removeClass, classList, remove } from '@syncfusion/ej2-base';\nimport { getElementIndex, inArray, parentsUntil, getPosition, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * The `Reorder` module is used for reordering columns.\n */\nvar Reorder = /** @class */ (function () {\n    /**\n     * Constructor for the Grid reorder module\n     * @hidden\n     */\n    function Reorder(parent) {\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.reorderComplete, this.onActionComplete, this);\n        this.parent.on(events.columnDrag, this.drag, this);\n        this.parent.on(events.columnDragStart, this.dragStart, this);\n        this.parent.on(events.columnDragStop, this.dragStop, this);\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    }\n    Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n        var col = this.parent.getColumnByUid(destElem.firstElementChild.getAttribute('e-mappinguid'));\n        var bool = col ? !col.lockColumn : true;\n        return ((srcElem.parentElement.isEqualNode(destElem.parentElement) || this.parent.enableColumnVirtualization)\n            || (this.parent.getFrozenColumns()\n                && Array.prototype.indexOf.call(closestElement(srcElem, 'thead').children, srcElem.parentElement)\n                    === Array.prototype.indexOf.call(closestElement(destElem, 'thead').children, destElem.parentElement)))\n            && this.targetParentContainerIndex(srcElem, destElem) > -1 && bool;\n    };\n    Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n        var isFound;\n        var headers = this.getHeaderCells();\n        var header;\n        while (!isFound && headers.length > 0) {\n            header = headers.pop();\n            isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n        }\n        return isFound;\n    };\n    Reorder.prototype.findColParent = function (col, cols, parent) {\n        parent = parent;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (col === cols[i]) {\n                return true;\n            }\n            else if (cols[i].columns) {\n                var cnt = parent.length;\n                parent.push(cols[i]);\n                if (!this.findColParent(col, cols[i].columns, parent)) {\n                    parent.splice(cnt, parent.length - cnt);\n                }\n                else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    Reorder.prototype.getColumnsModel = function (cols) {\n        var columnModel = [];\n        var subCols = [];\n        for (var i = 0, len = cols.length; i < len; i++) {\n            columnModel.push(cols[i]);\n            if (cols[i].columns) {\n                subCols = subCols.concat(cols[i].columns);\n            }\n        }\n        if (subCols.length) {\n            columnModel = columnModel.concat(this.getColumnsModel(subCols));\n        }\n        return columnModel;\n    };\n    Reorder.prototype.headerDrop = function (e) {\n        var gObj = this.parent;\n        var dropElement = this.element.querySelector('.e-headercelldiv') || this.element.querySelector('.e-stackedheadercelldiv');\n        var uId = dropElement.getAttribute('e-mappinguid');\n        var column = gObj.getColumnByUid(uId);\n        if (!closestElement(e.target, 'th') || (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn))) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: column });\n            return;\n        }\n        var destElem = closestElement(e.target, '.e-headercell');\n        var destElemDiv = destElem.querySelector('.e-headercelldiv') || destElem.querySelector('.e-stackedheadercelldiv');\n        var destElemUid = destElemDiv.getAttribute('e-mappinguid');\n        if (!isNullOrUndefined(destElemUid)) {\n            var destColumn = gObj.getColumnByUid(destElemUid);\n            if (isNullOrUndefined(destColumn) || !destColumn.allowReordering || destColumn.lockColumn) {\n                this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: column, destColumn: destColumn });\n                return;\n            }\n        }\n        if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n            if (this.parent.enableColumnVirtualization) {\n                var columns = this.parent.columns;\n                var sourceUid_1 = this.element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var col = this.parent.columns.filter(function (col) { return col.uid === sourceUid_1; });\n                var colMatchIndex_1 = null;\n                var column_1 = col[0];\n                var destUid_1 = destElem.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var bool = columns.some(function (col, index) {\n                    if (col.uid === destUid_1) {\n                        colMatchIndex_1 = index;\n                        return col.uid === destUid_1;\n                    }\n                    return false;\n                });\n                if (!isNullOrUndefined(colMatchIndex_1)) {\n                    this.moveColumns(colMatchIndex_1, column_1);\n                }\n            }\n            else {\n                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n                var uid = this.element.firstElementChild.getAttribute('e-mappinguid');\n                this.destElement = destElem;\n                if (uid) {\n                    this.moveColumns(newIndex, this.parent.getColumnByUid(uid));\n                }\n                else {\n                    var headers = this.getHeaderCells();\n                    var oldIdx = getElementIndex(this.element, headers);\n                    var columns = this.getColumnsModel(this.parent.columns);\n                    var column_2 = columns[oldIdx];\n                    this.moveColumns(newIndex, column_2);\n                }\n            }\n        }\n    };\n    Reorder.prototype.isActionPrevent = function (gObj) {\n        return isActionPrevent(gObj);\n    };\n    Reorder.prototype.moveColumns = function (destIndex, column, reorderByColumn, preventRefresh) {\n        var gObj = this.parent;\n        if (this.isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n            return;\n        }\n        var parent = this.getColParent(column, this.parent.columns);\n        var cols = parent ? parent.columns : this.parent.columns;\n        var srcIdx = inArray(column, cols);\n        if (((this.parent.getFrozenColumns() && parent) || this.parent.lockcolPositionCount) && !reorderByColumn) {\n            for (var i = 0; i < cols.length; i++) {\n                if (cols[i].field === column.field) {\n                    srcIdx = i;\n                    break;\n                }\n            }\n            var col = this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute('e-mappinguid'));\n            if (col) {\n                for (var i = 0; i < cols.length; i++) {\n                    if (cols[i].field === col.field) {\n                        destIndex = i;\n                        break;\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < cols.length; i++) {\n                    if (cols[i].headerText === this.destElement.innerText.trim()) {\n                        destIndex = i;\n                    }\n                }\n            }\n        }\n        if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n            return;\n        }\n        cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n        gObj.getColumns(true);\n        gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n        if (preventRefresh !== false) {\n            gObj.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'reorder', fromIndex: destIndex, toIndex: srcIdx, toColumnUid: column.uid\n            });\n        }\n    };\n    Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n        var headers = this.getHeaderCells();\n        var cols = this.parent.columns;\n        var flatColumns = this.getColumnsModel(cols);\n        var parent = this.getColParent(flatColumns[getElementIndex(srcElem, headers)], cols);\n        cols = parent ? parent.columns : cols;\n        return inArray(flatColumns[getElementIndex(destElem, headers)], cols);\n    };\n    Reorder.prototype.getHeaderCells = function () {\n        var frozenColumns = this.parent.getFrozenColumns();\n        if (frozenColumns || this.parent.lockcolPositionCount) {\n            var fTh = void 0;\n            var mTh = void 0;\n            var fHeaders = [];\n            var fRows = [].slice.call(this.parent.getHeaderTable().querySelectorAll('.e-columnheader'));\n            if (frozenColumns) {\n                var mRows = [].slice.call(this.parent.getHeaderContent()\n                    .querySelector('.e-movableheader').querySelectorAll('.e-columnheader'));\n                for (var i = 0; i < fRows.length; i++) {\n                    fTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                    mTh = [].slice.call(mRows[i].getElementsByClassName('e-headercell'));\n                    var isAvail = void 0;\n                    for (var k = 0; k < fTh.length; k++) {\n                        for (var j = 0; j < mTh.length; j++) {\n                            if (mTh[j].innerText === fTh[k].innerText) {\n                                isAvail = true;\n                                break;\n                            }\n                        }\n                        if (!isAvail) {\n                            fHeaders = fHeaders.concat([fTh[k]]);\n                        }\n                    }\n                    for (var j = 0; j < mTh.length; j++) {\n                        fHeaders.push(mTh[j]);\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < fRows.length; i++) {\n                    mTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                    for (var k = 0; k < mTh.length; k++) {\n                        var isAvail = void 0;\n                        for (var j = k + 1; j < mTh.length; j++) {\n                            if (mTh[j].innerText === mTh[k].innerText) {\n                                isAvail = true;\n                                break;\n                            }\n                        }\n                        if (!isAvail) {\n                            fHeaders = fHeaders.concat([mTh[k]]);\n                        }\n                    }\n                }\n            }\n            return fHeaders;\n        }\n        else {\n            return [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n        }\n    };\n    Reorder.prototype.getColParent = function (column, columns) {\n        var parents = [];\n        this.findColParent(column, columns, parents);\n        return parents[parents.length - 1];\n    };\n    Reorder.prototype.reorderSingleColumn = function (fromFName, toFName) {\n        var fColumn = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (col) { return col.field === fromFName; })[0]\n            : this.parent.getColumnByField(fromFName);\n        var toColumn = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (col) { return col.field === toFName; })[0]\n            : this.parent.getColumnByField(toFName);\n        if ((!isNullOrUndefined(fColumn) && (!fColumn.allowReordering || fColumn.lockColumn)) ||\n            (!isNullOrUndefined(toColumn) && (!toColumn.allowReordering || fColumn.lockColumn))) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: fColumn, destColumn: toColumn });\n            return;\n        }\n        var column = toColumn;\n        var parent = this.getColParent(column, this.parent.columns);\n        var columns = parent ? parent.columns : this.parent.columns;\n        var destIndex = inArray(column, columns);\n        if (destIndex > -1) {\n            this.moveColumns(destIndex, fColumn, true);\n        }\n    };\n    Reorder.prototype.reorderMultipleColumns = function (fromFNames, toFName) {\n        var toIndex = this.parent.getColumnIndexByField(toFName);\n        var toColumn = this.parent.getColumnByField(toFName);\n        if (toIndex < 0 || (!isNullOrUndefined(toColumn) && (!toColumn.allowReordering || toColumn.lockColumn))) {\n            return;\n        }\n        for (var i = 0; i < fromFNames.length; i++) {\n            var column = this.parent.getColumnByField(fromFNames[i]);\n            if (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn)) {\n                return;\n            }\n        }\n        for (var i = 0; i < fromFNames.length; i++) {\n            var column = this.parent.getColumnByIndex(toIndex);\n            var parent_1 = this.getColParent(column, this.parent.columns);\n            var columns = parent_1 ? parent_1.columns : this.parent.columns;\n            var destIndex = inArray(column, columns);\n            if (destIndex > -1) {\n                this.moveColumns(destIndex, this.parent.getColumnByField(fromFNames[i]), true, !(isBlazor() && !this.parent.isJsComponent));\n            }\n            if (this.parent.getColumnIndexByField(fromFNames[i + 1]) >= destIndex) {\n                toIndex++; //R to L\n            }\n        }\n        if (isBlazor() && !this.parent.isJsComponent) {\n            var cols_1 = this.parent.getColumns();\n            this.parent.notify(events.modelChanged, {\n                fromColumnUid: fromFNames.map(function (name) { return cols_1.filter(function (col) { return col.field === name; })[0].uid; }),\n                toColumnUid: toColumn.uid,\n                isMultipleReorder: true,\n                requestType: 'reorder',\n                type: 'actionBegin'\n            });\n        }\n    };\n    Reorder.prototype.moveTargetColumn = function (column, toIndex) {\n        if (toIndex > -1) {\n            this.moveColumns(toIndex, column, true);\n        }\n    };\n    Reorder.prototype.reorderSingleColumnByTarget = function (fieldName, toIndex) {\n        var column = this.parent.getColumnByField(fieldName);\n        this.moveTargetColumn(column, toIndex);\n    };\n    Reorder.prototype.reorderMultipleColumnByTarget = function (fieldName, toIndex) {\n        for (var i = 0; i < fieldName.length; i++) {\n            this.reorderSingleColumnByTarget(fieldName[i], toIndex);\n        }\n    };\n    /**\n     * Changes the position of the Grid columns by field names.\n     * @param  {string | string[]} fromFName - Defines the origin field names.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n        if (typeof fromFName === 'string') {\n            this.reorderSingleColumn(fromFName, toFName);\n            this.fromCol = fromFName;\n        }\n        else {\n            this.reorderMultipleColumns(fromFName, toFName);\n            this.fromCol = fromFName[0];\n        }\n    };\n    /**\n     * Changes the position of the Grid columns by field index.\n     * @param  {number} fromIndex - Defines the origin field index.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumnByIndex = function (fromIndex, toIndex) {\n        var column = this.parent.getColumnByIndex(fromIndex);\n        this.moveTargetColumn(column, toIndex);\n    };\n    /**\n     * Changes the position of the Grid columns by field index.\n     * @param  {string | string[]} fieldName - Defines the field name.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumnByTargetIndex = function (fieldName, toIndex) {\n        typeof fieldName === 'string' ? this.reorderSingleColumnByTarget(fieldName, toIndex) :\n            this.reorderMultipleColumnByTarget(fieldName, toIndex);\n    };\n    Reorder.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.createReorderElement();\n        }\n    };\n    Reorder.prototype.createReorderElement = function (e) {\n        if (e && e.args.isXaxis) {\n            this.setDisplay('none');\n        }\n        var header = this.parent.element.querySelector('.e-headercontent');\n        this.upArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n        this.downArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.onActionComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n        var target = this.fromCol && this.parent.getColumnHeaderByField(this.fromCol);\n        if (target) {\n            this.parent.focusModule.onClick({ target: target }, true);\n        }\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        remove(this.upArrow);\n        remove(this.downArrow);\n        this.parent.off(events.headerDrop, this.headerDrop);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.reorderComplete, this.onActionComplete);\n        this.parent.off(events.columnDrag, this.drag);\n        this.parent.off(events.columnDragStart, this.dragStart);\n        this.parent.off(events.columnDragStop, this.dragStop);\n        this.parent.off(events.headerRefreshed, this.createReorderElement);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        //call ejdrag and drop destroy\n    };\n    Reorder.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlLeftArrow':\n            case 'ctrlRightArrow':\n                var element = gObj.focusModule.currentInfo.element;\n                if (element && element.classList.contains('e-headercell')) {\n                    var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                    var visibleCols = gObj.getVisibleColumns();\n                    var index = visibleCols.indexOf(column);\n                    var toCol = e.action === 'ctrlLeftArrow' ? visibleCols[index - 1] : visibleCols[index + 1];\n                    if (toCol && toCol.field && column.field) {\n                        this.reorderColumns(column.field, toCol.field);\n                    }\n                }\n                break;\n        }\n    };\n    Reorder.prototype.drag = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (!e.column.allowReordering || e.column.lockColumn) {\n            return;\n        }\n        var closest = closestElement(target, '.e-headercell:not(.e-stackedHeaderCell)');\n        var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n        var content = gObj.getFrozenColumns() ? gObj.getMovableVirtualContent() : gObj.getContent().firstElementChild;\n        var isLeft = this.x > getPosition(e.event).x + content.scrollLeft;\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n        this.setDisplay('none');\n        this.stopTimer();\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        this.updateScrollPostion(e.event);\n        if (closest && !closest.isEqualNode(this.element)) {\n            target = closest;\n            //consider stacked, detail header cell \n            if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n                this.updateArrowPosition(target, isLeft);\n                classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n            }\n            else if (!(gObj.allowGrouping && parentsUntil(e.target, 'e-groupdroparea'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        }\n        gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n    };\n    Reorder.prototype.updateScrollPostion = function (e) {\n        var _this = this;\n        var frzCols = this.parent.getFrozenColumns();\n        var x = getPosition(e).x;\n        var cliRect = this.parent.element.getBoundingClientRect();\n        var cliRectBaseLeft = frzCols ? this.parent.element.querySelector('.e-movableheader')\n            .getBoundingClientRect().left : cliRect.left;\n        var cliRectBaseRight = cliRect.right;\n        var scrollElem = frzCols ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstElementChild;\n        if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n        }\n        else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n        }\n    };\n    Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n        var scrollLeft = scrollElem.scrollLeft;\n        scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n        if (scrollLeft !== scrollElem.scrollLeft) {\n            this.setDisplay('none');\n        }\n    };\n    Reorder.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n        var cliRect = target.getBoundingClientRect();\n        var cliRectBase = this.parent.element.getBoundingClientRect();\n        if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n            return;\n        }\n        if (this.parent.getFrozenColumns() && target.classList.contains('e-headercell')) {\n            var col = this.parent.getColumnByUid(target.firstElementChild.getAttribute('e-mappinguid'));\n            var fhdrWidth = Math.round(this.parent.getFrozenVirtualHeader().getBoundingClientRect().right);\n            var mhdrRight = Math.round(this.parent.getMovableVirtualHeader().getBoundingClientRect().right);\n            if (col && this.parent.getNormalizedColumnIndex(col.uid) >= this.parent.getFrozenColumns()\n                && ((isLeft && Math.round(cliRect.left) < fhdrWidth) || (!isLeft && mhdrRight < cliRect.right))) {\n                return;\n            }\n        }\n        this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n        this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n        this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n        this.setDisplay('');\n    };\n    Reorder.prototype.dragStart = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        this.element = target.classList.contains('e-headercell') ? target :\n            parentsUntil(target, 'e-headercell');\n        if (!e.column.allowReordering || e.column.lockColumn) {\n            return;\n        }\n        var content = gObj.getFrozenColumns() ? gObj.getMovableVirtualContent() : gObj.getContent().firstElementChild;\n        this.x = getPosition(e.event).x + content.scrollLeft;\n        gObj.trigger(events.columnDragStart, {\n            target: target, draggableType: 'headercell', column: e.column\n        });\n    };\n    Reorder.prototype.dragStop = function (e) {\n        var gObj = this.parent;\n        this.setDisplay('none');\n        this.stopTimer();\n        if (!e.cancel) {\n            gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n        }\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n    };\n    Reorder.prototype.setDisplay = function (display) {\n        this.upArrow.style.display = display;\n        this.downArrow.style.display = display;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Reorder.prototype.getModuleName = function () {\n        return 'reorder';\n    };\n    return Reorder;\n}());\nexport { Reorder };\n"]},"metadata":{},"sourceType":"module"}