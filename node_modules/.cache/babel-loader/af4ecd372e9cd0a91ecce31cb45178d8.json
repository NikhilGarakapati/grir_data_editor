{"ast":null,"code":"import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { columnWidthChanged } from '../base/constant';\nimport { Column } from '../models/column';\nimport { parentsUntil } from '../base/util';\n/**\n * ColumnWidthService\n * @hidden\n */\n\nvar ColumnWidthService =\n/** @class */\nfunction () {\n  function ColumnWidthService(parent) {\n    this.parent = parent;\n  }\n\n  ColumnWidthService.prototype.setWidthToColumns = function () {\n    var i = 0;\n    var indexes = this.parent.getColumnIndexesInView();\n    var wFlag = true;\n    var totalColumnsWidth = 0;\n\n    if (this.parent.allowGrouping) {\n      for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n        if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n          wFlag = false;\n          continue;\n        }\n\n        this.setColumnWidth(new Column({\n          width: '30px'\n        }), i);\n      }\n    }\n\n    if (this.parent.detailTemplate || this.parent.childGrid) {\n      this.setColumnWidth(new Column({\n        width: '30px'\n      }), i);\n      i++;\n    }\n\n    if (this.parent.isRowDragable()) {\n      this.setColumnWidth(new Column({\n        width: '30px'\n      }), i);\n      i++;\n    }\n\n    var columns = this.parent.getColumns();\n\n    for (var j = 0; j < columns.length; j++) {\n      this.setColumnWidth(columns[j], wFlag && this.parent.enableColumnVirtualization ? undefined : j + i);\n    }\n\n    totalColumnsWidth = this.getTableWidth(this.parent.getColumns());\n\n    if (this.parent.width !== 'auto' && this.parent.width.toString().indexOf('%') === -1) {\n      this.setMinwidthBycalculation(totalColumnsWidth);\n    }\n  };\n\n  ColumnWidthService.prototype.setMinwidthBycalculation = function (tWidth) {\n    var difference = 0;\n    var collection = this.parent.getColumns().filter(function (a) {\n      return isNullOrUndefined(a.width) || a.width === 'auto';\n    });\n\n    if (collection.length) {\n      if (!isNullOrUndefined(this.parent.width) && this.parent.width !== 'auto') {\n        difference = (typeof this.parent.width === 'string' ? parseInt(this.parent.width, 10) : this.parent.width) - tWidth;\n      }\n\n      var tmWidth = 0;\n\n      for (var _i = 0, collection_1 = collection; _i < collection_1.length; _i++) {\n        var cols = collection_1[_i];\n        tmWidth += !isNullOrUndefined(cols.minWidth) ? typeof cols.minWidth === 'string' ? parseInt(cols.minWidth, 10) : cols.minWidth : 0;\n      }\n\n      for (var i = 0; i < collection.length; i++) {\n        if (tWidth === 0 && this.parent.allowResizing && this.isWidthUndefined() && i !== collection.length - 1) {\n          this.setUndefinedColumnWidth(collection);\n        }\n\n        if (tWidth !== 0 && difference < tmWidth) {\n          this.setWidth(collection[i].minWidth, this.parent.getColumnIndexByField(collection[i].field));\n        } else if (tWidth !== 0 && difference > tmWidth) {\n          this.setWidth('', this.parent.getColumnIndexByField(collection[i].field), true);\n        }\n      }\n    }\n  };\n\n  ColumnWidthService.prototype.setUndefinedColumnWidth = function (collection) {\n    for (var k = 0; k < collection.length; k++) {\n      if (k !== collection.length - 1) {\n        collection[k].width = 200;\n        this.setWidth(200, this.parent.getColumnIndexByField(collection[k].field));\n      }\n    }\n  };\n\n  ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n    if (this.parent.getColumns().length < 1) {\n      return;\n    }\n\n    var columnIndex = isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n    var cWidth = this.getWidth(column);\n    var tgridWidth = this.getTableWidth(this.parent.getColumns());\n\n    if (cWidth !== null) {\n      this.setWidth(cWidth, columnIndex);\n\n      if (this.parent.width !== 'auto' && this.parent.width.toString().indexOf('%') === -1) {\n        this.setMinwidthBycalculation(tgridWidth);\n      }\n\n      if (this.parent.allowResizing && module === 'resize' || this.parent.getFrozenColumns() && this.parent.allowResizing) {\n        this.setWidthToTable();\n      }\n\n      this.parent.notify(columnWidthChanged, {\n        index: columnIndex,\n        width: cWidth,\n        column: column,\n        module: module\n      });\n    }\n  };\n\n  ColumnWidthService.prototype.setWidth = function (width, index, clear) {\n    var chrome = 'chrome';\n    var webstore = 'webstore';\n\n    if (typeof width === 'string' && width.indexOf('%') !== -1 && !(Boolean(window[chrome]) && Boolean(window[chrome][webstore])) && this.parent.allowGrouping) {\n      var elementWidth = this.parent.element.offsetWidth;\n      width = parseInt(width, 10) / 100 * elementWidth;\n    }\n\n    var header = this.parent.getHeaderTable();\n    var content = this.parent.getContentTable();\n    var fWidth = formatUnit(width);\n    var headerCol;\n    var frzCols = this.parent.getFrozenColumns();\n    var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n    var mCont = this.parent.getContent().querySelector('.e-movablecontent');\n\n    if (frzCols && index >= frzCols && mHdr && mHdr.querySelector('colgroup')) {\n      headerCol = mHdr.querySelector('colgroup').children[index - frzCols];\n    } else if (this.parent.enableColumnVirtualization && frzCols && this.parent.contentModule.isXaxis() && mHdr.scrollLeft > 0) {\n      var colGroup = mHdr.querySelector('colgroup');\n      headerCol = colGroup.children[colGroup.children.length - 1 - index];\n    } else {\n      headerCol = header.querySelector('colgroup').children[index];\n    }\n\n    if (headerCol && !clear) {\n      headerCol.style.width = fWidth;\n    } else if (headerCol && clear) {\n      headerCol.style.width = ' ';\n    }\n\n    var contentCol;\n\n    if (frzCols && index >= frzCols) {\n      contentCol = this.parent.getContent().querySelector('.e-movablecontent').querySelector('colgroup').children[index - frzCols];\n    } else if (this.parent.enableColumnVirtualization && frzCols && this.parent.contentModule.isXaxis() && mCont.scrollLeft > 0) {\n      var colGroup = this.parent.getContent().querySelector('.e-movablecontent').querySelector('colgroup');\n      contentCol = colGroup.children[colGroup.children.length - 1 - index];\n    } else {\n      contentCol = content.querySelector('colgroup').children[index];\n    }\n\n    if (contentCol && !clear) {\n      contentCol.style.width = fWidth;\n    } else if (contentCol && clear) {\n      contentCol.style.width = ' ';\n    }\n\n    var edit = this.parent.element.querySelectorAll('.e-table.e-inline-edit');\n    var editTableCol = [];\n\n    for (var i = 0; i < edit.length; i++) {\n      if (parentsUntil(edit[i], 'e-grid').id === this.parent.element.id) {\n        for (var j = 0; j < edit[i].querySelector('colgroup').children.length; j++) {\n          editTableCol.push(edit[i].querySelector('colgroup').children[j]);\n        }\n      }\n    }\n\n    if (edit.length && editTableCol.length) {\n      editTableCol[index].style.width = fWidth;\n    }\n  };\n\n  ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n    var previous = this.getHeightFromDirection(element, 'previous');\n    var next = this.getHeightFromDirection(element, 'next');\n    return previous + next;\n  };\n\n  ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n    var sibling = element[direction + 'ElementSibling'];\n    var result = 0;\n    var classList = ['e-gridheader', 'e-gridfooter', 'e-groupdroparea', 'e-gridpager', 'e-toolbar'];\n\n    while (sibling) {\n      if (classList.some(function (value) {\n        return sibling.classList.contains(value);\n      })) {\n        result += sibling.offsetHeight;\n      }\n\n      sibling = sibling[direction + 'ElementSibling'];\n    }\n\n    return result;\n  };\n\n  ColumnWidthService.prototype.isWidthUndefined = function () {\n    var isWidUndefCount = this.parent.getColumns().filter(function (col) {\n      return isNullOrUndefined(col.width) && isNullOrUndefined(col.minWidth);\n    }).length;\n    return this.parent.getColumns().length === isWidUndefCount;\n  };\n\n  ColumnWidthService.prototype.getWidth = function (column) {\n    if (isNullOrUndefined(column.width) && this.parent.allowResizing && isNullOrUndefined(column.minWidth) && !this.isWidthUndefined()) {\n      column.width = 200;\n    }\n\n    if (this.parent.frozenColumns && isNullOrUndefined(column.width) && column.index < this.parent.frozenColumns) {\n      column.width = 200;\n    }\n\n    if (!column.width) {\n      return null;\n    }\n\n    var width = parseInt(column.width.toString(), 10);\n\n    if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n      return column.minWidth;\n    } else if (column.maxWidth && width > parseInt(column.maxWidth.toString(), 10)) {\n      return column.maxWidth;\n    } else {\n      return column.width;\n    }\n  };\n\n  ColumnWidthService.prototype.getTableWidth = function (columns) {\n    var tWidth = 0;\n\n    for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n      var column = columns_1[_i];\n      var cWidth = this.getWidth(column);\n\n      if (column.width === 'auto') {\n        cWidth = 0;\n      }\n\n      if (column.visible !== false && cWidth !== null) {\n        tWidth += parseInt(cWidth.toString(), 10);\n      }\n    }\n\n    return tWidth;\n  };\n\n  ColumnWidthService.prototype.calcMovableOrFreezeColWidth = function (tableType) {\n    var columns = this.parent.getColumns().slice();\n\n    if (tableType === 'movable') {\n      columns.splice(0, this.parent.getFrozenColumns());\n    } else if (tableType === 'freeze') {\n      columns.splice(this.parent.getFrozenColumns(), columns.length);\n    }\n\n    return formatUnit(this.getTableWidth(columns));\n  };\n\n  ColumnWidthService.prototype.setWidthToFrozenTable = function () {\n    var freezeWidth = this.calcMovableOrFreezeColWidth('freeze');\n    this.parent.getHeaderTable().style.width = freezeWidth;\n    this.parent.getContentTable().style.width = freezeWidth;\n  };\n\n  ColumnWidthService.prototype.setWidthToMovableTable = function () {\n    var movableWidth = '';\n    var isColUndefined = this.parent.getColumns().filter(function (a) {\n      return isNullOrUndefined(a.width);\n    }).length >= 1;\n    var isWidthAuto = this.parent.getColumns().filter(function (a) {\n      return a.width === 'auto';\n    }).length >= 1;\n\n    if (typeof this.parent.width === 'number' && !isColUndefined && !isWidthAuto) {\n      movableWidth = formatUnit(this.parent.width - parseInt(this.calcMovableOrFreezeColWidth('freeze').split('px')[0], 10) - 5);\n    } else if (!isColUndefined && !isWidthAuto) {\n      movableWidth = this.calcMovableOrFreezeColWidth('movable');\n    }\n\n    if (this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild) {\n      this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild.style.width = movableWidth;\n    }\n\n    this.parent.getContent().querySelector('.e-movablecontent').firstElementChild.style.width = movableWidth;\n  };\n\n  ColumnWidthService.prototype.setWidthToFrozenEditTable = function () {\n    var freezeWidth = this.calcMovableOrFreezeColWidth('freeze');\n    this.parent.element.querySelectorAll('.e-table.e-inline-edit')[0].style.width = freezeWidth;\n  };\n\n  ColumnWidthService.prototype.setWidthToMovableEditTable = function () {\n    var movableWidth = this.calcMovableOrFreezeColWidth('movable');\n    this.parent.element.querySelectorAll('.e-table.e-inline-edit')[1].style.width = movableWidth;\n  };\n\n  ColumnWidthService.prototype.setWidthToTable = function () {\n    var tWidth = formatUnit(this.getTableWidth(this.parent.getColumns()));\n\n    if (this.parent.getFrozenColumns()) {\n      this.setWidthToFrozenTable();\n      this.setWidthToMovableTable();\n    } else {\n      if (this.parent.detailTemplate || this.parent.childGrid) {\n        this.setColumnWidth(new Column({\n          width: '30px'\n        }));\n      }\n\n      this.parent.getHeaderTable().style.width = tWidth;\n      this.parent.getContentTable().style.width = tWidth;\n    }\n\n    var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n\n    if (edit && this.parent.getFrozenColumns()) {\n      this.setWidthToFrozenEditTable();\n      this.setWidthToMovableEditTable();\n    } else if (edit) {\n      edit.style.width = tWidth;\n    }\n  };\n\n  return ColumnWidthService;\n}();\n\nexport { ColumnWidthService };","map":{"version":3,"sources":["/home/nikhil/Desktop/data_grid_editor-master/node_modules/@syncfusion/ej2-grids/src/grid/services/width-controller.js"],"names":["isNullOrUndefined","formatUnit","columnWidthChanged","Column","parentsUntil","ColumnWidthService","parent","prototype","setWidthToColumns","i","indexes","getColumnIndexesInView","wFlag","totalColumnsWidth","allowGrouping","len","groupSettings","columns","length","enableColumnVirtualization","indexOf","setColumnWidth","width","detailTemplate","childGrid","isRowDragable","getColumns","j","undefined","getTableWidth","toString","setMinwidthBycalculation","tWidth","difference","collection","filter","a","parseInt","tmWidth","_i","collection_1","cols","minWidth","allowResizing","isWidthUndefined","setUndefinedColumnWidth","setWidth","getColumnIndexByField","field","k","column","index","module","columnIndex","getNormalizedColumnIndex","uid","cWidth","getWidth","tgridWidth","getFrozenColumns","setWidthToTable","notify","clear","chrome","webstore","Boolean","window","elementWidth","element","offsetWidth","header","getHeaderTable","content","getContentTable","fWidth","headerCol","frzCols","mHdr","getHeaderContent","querySelector","mCont","getContent","children","contentModule","isXaxis","scrollLeft","colGroup","style","contentCol","edit","querySelectorAll","editTableCol","id","push","getSiblingsHeight","previous","getHeightFromDirection","next","direction","sibling","result","classList","some","value","contains","offsetHeight","isWidUndefCount","col","frozenColumns","maxWidth","columns_1","visible","calcMovableOrFreezeColWidth","tableType","slice","splice","setWidthToFrozenTable","freezeWidth","setWidthToMovableTable","movableWidth","isColUndefined","isWidthAuto","split","firstElementChild","setWidthToFrozenEditTable","setWidthToMovableEditTable"],"mappings":"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","sourcesContent":["import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { columnWidthChanged } from '../base/constant';\nimport { Column } from '../models/column';\nimport { parentsUntil } from '../base/util';\n/**\n * ColumnWidthService\n * @hidden\n */\nvar ColumnWidthService = /** @class */ (function () {\n    function ColumnWidthService(parent) {\n        this.parent = parent;\n    }\n    ColumnWidthService.prototype.setWidthToColumns = function () {\n        var i = 0;\n        var indexes = this.parent.getColumnIndexesInView();\n        var wFlag = true;\n        var totalColumnsWidth = 0;\n        if (this.parent.allowGrouping) {\n            for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    wFlag = false;\n                    continue;\n                }\n                this.setColumnWidth(new Column({ width: '30px' }), i);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n            i++;\n        }\n        if (this.parent.isRowDragable()) {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n            i++;\n        }\n        var columns = this.parent.getColumns();\n        for (var j = 0; j < columns.length; j++) {\n            this.setColumnWidth(columns[j], wFlag && this.parent.enableColumnVirtualization ? undefined : j + i);\n        }\n        totalColumnsWidth = this.getTableWidth(this.parent.getColumns());\n        if (this.parent.width !== 'auto' && this.parent.width.toString().indexOf('%') === -1) {\n            this.setMinwidthBycalculation(totalColumnsWidth);\n        }\n    };\n    ColumnWidthService.prototype.setMinwidthBycalculation = function (tWidth) {\n        var difference = 0;\n        var collection = this.parent.getColumns().filter(function (a) {\n            return isNullOrUndefined(a.width) || a.width === 'auto';\n        });\n        if (collection.length) {\n            if (!isNullOrUndefined(this.parent.width) && this.parent.width !== 'auto') {\n                difference = (typeof this.parent.width === 'string' ? parseInt(this.parent.width, 10) : this.parent.width) - tWidth;\n            }\n            var tmWidth = 0;\n            for (var _i = 0, collection_1 = collection; _i < collection_1.length; _i++) {\n                var cols = collection_1[_i];\n                tmWidth += !isNullOrUndefined(cols.minWidth) ?\n                    ((typeof cols.minWidth === 'string' ? parseInt(cols.minWidth, 10) : cols.minWidth)) : 0;\n            }\n            for (var i = 0; i < collection.length; i++) {\n                if (tWidth === 0 && this.parent.allowResizing && this.isWidthUndefined() && (i !== collection.length - 1)) {\n                    this.setUndefinedColumnWidth(collection);\n                }\n                if (tWidth !== 0 && difference < tmWidth) {\n                    this.setWidth(collection[i].minWidth, this.parent.getColumnIndexByField(collection[i].field));\n                }\n                else if (tWidth !== 0 && difference > tmWidth) {\n                    this.setWidth('', this.parent.getColumnIndexByField(collection[i].field), true);\n                }\n            }\n        }\n    };\n    ColumnWidthService.prototype.setUndefinedColumnWidth = function (collection) {\n        for (var k = 0; k < collection.length; k++) {\n            if (k !== collection.length - 1) {\n                collection[k].width = 200;\n                this.setWidth(200, this.parent.getColumnIndexByField(collection[k].field));\n            }\n        }\n    };\n    ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n        if (this.parent.getColumns().length < 1) {\n            return;\n        }\n        var columnIndex = isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n        var cWidth = this.getWidth(column);\n        var tgridWidth = this.getTableWidth(this.parent.getColumns());\n        if (cWidth !== null) {\n            this.setWidth(cWidth, columnIndex);\n            if (this.parent.width !== 'auto' && this.parent.width.toString().indexOf('%') === -1) {\n                this.setMinwidthBycalculation(tgridWidth);\n            }\n            if ((this.parent.allowResizing && module === 'resize') || (this.parent.getFrozenColumns() && this.parent.allowResizing)) {\n                this.setWidthToTable();\n            }\n            this.parent.notify(columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n        }\n    };\n    ColumnWidthService.prototype.setWidth = function (width, index, clear) {\n        var chrome = 'chrome';\n        var webstore = 'webstore';\n        if (typeof (width) === 'string' && width.indexOf('%') !== -1 &&\n            !(Boolean(window[chrome]) && Boolean(window[chrome][webstore])) && this.parent.allowGrouping) {\n            var elementWidth = this.parent.element.offsetWidth;\n            width = parseInt(width, 10) / 100 * (elementWidth);\n        }\n        var header = this.parent.getHeaderTable();\n        var content = this.parent.getContentTable();\n        var fWidth = formatUnit(width);\n        var headerCol;\n        var frzCols = this.parent.getFrozenColumns();\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        var mCont = this.parent.getContent().querySelector('.e-movablecontent');\n        if (frzCols && index >= frzCols && mHdr && mHdr.querySelector('colgroup')) {\n            headerCol = mHdr.querySelector('colgroup').children[index - frzCols];\n        }\n        else if (this.parent.enableColumnVirtualization && frzCols && this.parent.contentModule.isXaxis()\n            && mHdr.scrollLeft > 0) {\n            var colGroup = mHdr.querySelector('colgroup');\n            headerCol = colGroup.children[(colGroup.children.length - 1) - index];\n        }\n        else {\n            headerCol = header.querySelector('colgroup').children[index];\n        }\n        if (headerCol && !clear) {\n            headerCol.style.width = fWidth;\n        }\n        else if (headerCol && clear) {\n            headerCol.style.width = ' ';\n        }\n        var contentCol;\n        if (frzCols && index >= frzCols) {\n            contentCol = this.parent.getContent().querySelector('.e-movablecontent')\n                .querySelector('colgroup').children[index - frzCols];\n        }\n        else if (this.parent.enableColumnVirtualization && frzCols && this.parent.contentModule.isXaxis()\n            && mCont.scrollLeft > 0) {\n            var colGroup = this.parent.getContent().querySelector('.e-movablecontent')\n                .querySelector('colgroup');\n            contentCol = colGroup.children[(colGroup.children.length - 1) - index];\n        }\n        else {\n            contentCol = content.querySelector('colgroup').children[index];\n        }\n        if (contentCol && !clear) {\n            contentCol.style.width = fWidth;\n        }\n        else if (contentCol && clear) {\n            contentCol.style.width = ' ';\n        }\n        var edit = this.parent.element.querySelectorAll('.e-table.e-inline-edit');\n        var editTableCol = [];\n        for (var i = 0; i < edit.length; i++) {\n            if (parentsUntil(edit[i], 'e-grid').id === this.parent.element.id) {\n                for (var j = 0; j < edit[i].querySelector('colgroup').children.length; j++) {\n                    editTableCol.push(edit[i].querySelector('colgroup').children[j]);\n                }\n            }\n        }\n        if (edit.length && editTableCol.length) {\n            editTableCol[index].style.width = fWidth;\n        }\n    };\n    ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n        var previous = this.getHeightFromDirection(element, 'previous');\n        var next = this.getHeightFromDirection(element, 'next');\n        return previous + next;\n    };\n    ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n        var sibling = element[direction + 'ElementSibling'];\n        var result = 0;\n        var classList = ['e-gridheader', 'e-gridfooter', 'e-groupdroparea', 'e-gridpager', 'e-toolbar'];\n        while (sibling) {\n            if (classList.some(function (value) { return sibling.classList.contains(value); })) {\n                result += sibling.offsetHeight;\n            }\n            sibling = sibling[direction + 'ElementSibling'];\n        }\n        return result;\n    };\n    ColumnWidthService.prototype.isWidthUndefined = function () {\n        var isWidUndefCount = this.parent.getColumns().filter(function (col) {\n            return isNullOrUndefined(col.width) && isNullOrUndefined(col.minWidth);\n        }).length;\n        return (this.parent.getColumns().length === isWidUndefCount);\n    };\n    ColumnWidthService.prototype.getWidth = function (column) {\n        if (isNullOrUndefined(column.width) && this.parent.allowResizing\n            && isNullOrUndefined(column.minWidth) && !this.isWidthUndefined()) {\n            column.width = 200;\n        }\n        if (this.parent.frozenColumns && isNullOrUndefined(column.width) &&\n            column.index < this.parent.frozenColumns) {\n            column.width = 200;\n        }\n        if (!column.width) {\n            return null;\n        }\n        var width = parseInt(column.width.toString(), 10);\n        if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n            return column.minWidth;\n        }\n        else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n            return column.maxWidth;\n        }\n        else {\n            return column.width;\n        }\n    };\n    ColumnWidthService.prototype.getTableWidth = function (columns) {\n        var tWidth = 0;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            var cWidth = this.getWidth(column);\n            if (column.width === 'auto') {\n                cWidth = 0;\n            }\n            if (column.visible !== false && cWidth !== null) {\n                tWidth += parseInt(cWidth.toString(), 10);\n            }\n        }\n        return tWidth;\n    };\n    ColumnWidthService.prototype.calcMovableOrFreezeColWidth = function (tableType) {\n        var columns = this.parent.getColumns().slice();\n        if (tableType === 'movable') {\n            columns.splice(0, this.parent.getFrozenColumns());\n        }\n        else if (tableType === 'freeze') {\n            columns.splice(this.parent.getFrozenColumns(), columns.length);\n        }\n        return formatUnit(this.getTableWidth(columns));\n    };\n    ColumnWidthService.prototype.setWidthToFrozenTable = function () {\n        var freezeWidth = this.calcMovableOrFreezeColWidth('freeze');\n        this.parent.getHeaderTable().style.width = freezeWidth;\n        this.parent.getContentTable().style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableTable = function () {\n        var movableWidth = '';\n        var isColUndefined = this.parent.getColumns().filter(function (a) { return isNullOrUndefined(a.width); }).length >= 1;\n        var isWidthAuto = this.parent.getColumns().filter(function (a) { return (a.width === 'auto'); }).length >= 1;\n        if (typeof this.parent.width === 'number' && !isColUndefined && !isWidthAuto) {\n            movableWidth = formatUnit(this.parent.width - parseInt(this.calcMovableOrFreezeColWidth('freeze').split('px')[0], 10) - 5);\n        }\n        else if (!isColUndefined && !isWidthAuto) {\n            movableWidth = this.calcMovableOrFreezeColWidth('movable');\n        }\n        if (this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild) {\n            this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild.style.width\n                = movableWidth;\n        }\n        this.parent.getContent().querySelector('.e-movablecontent').firstElementChild.style.width =\n            movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToFrozenEditTable = function () {\n        var freezeWidth = this.calcMovableOrFreezeColWidth('freeze');\n        this.parent.element.querySelectorAll('.e-table.e-inline-edit')[0].style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableEditTable = function () {\n        var movableWidth = this.calcMovableOrFreezeColWidth('movable');\n        this.parent.element.querySelectorAll('.e-table.e-inline-edit')[1].style.width = movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToTable = function () {\n        var tWidth = formatUnit(this.getTableWidth(this.parent.getColumns()));\n        if (this.parent.getFrozenColumns()) {\n            this.setWidthToFrozenTable();\n            this.setWidthToMovableTable();\n        }\n        else {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.setColumnWidth(new Column({ width: '30px' }));\n            }\n            this.parent.getHeaderTable().style.width = tWidth;\n            this.parent.getContentTable().style.width = tWidth;\n        }\n        var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n        if (edit && this.parent.getFrozenColumns()) {\n            this.setWidthToFrozenEditTable();\n            this.setWidthToMovableEditTable();\n        }\n        else if (edit) {\n            edit.style.width = tWidth;\n        }\n    };\n    return ColumnWidthService;\n}());\nexport { ColumnWidthService };\n"]},"metadata":{},"sourceType":"module"}